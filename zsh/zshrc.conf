# ZSH Settings

export PATH=$PATH:/usr/local/git/bin:/usr/local/bin
export PATH=~/.local/bin:$PATH

# Auto-update repos (max once per interval)
auto_pull_repo() {
  local name="$1"
  local dir="$2"
  local interval="$3"
  local timestamp_file="$HOME/.${name}_last_pull"

  [[ ! -d "$dir/.git" ]] && return

  if [[ ! -f "$timestamp_file" ]]; then
    echo "ðŸ“¦ Pulling $name (first run)..."
    (cd "$dir" && git pull && date +%s > "$timestamp_file")
  elif [[ $(($(date +%s) - $(cat "$timestamp_file"))) -gt $interval ]]; then
    local days_ago=$(( ($(date +%s) - $(cat "$timestamp_file")) / 86400 ))
    echo "ðŸ“¦ Pulling $name (last updated $days_ago days ago)..."
    (cd "$dir" && git pull && date +%s > "$timestamp_file")
  fi
}

WEEKLY=$((7 * 24 * 60 * 60))
DAILY=$((24 * 60 * 60))

auto_pull_repo "dotfiles" "$HOME/dotfiles" $WEEKLY
auto_pull_repo "claude-config" "$HOME/workspace/claude-config" $DAILY

for alias_cp in $HOME/workplace/azuleeDevScripts/src/AzuleeDevScripts/zsh/amazon_aliases.zsh;do
	[ -f "$alias_cp" ] && cp $alias_cp $HOME/dotfiles/zsh/
done

folder="$HOME/dotfiles/zsh"
for file in $folder/*;do
	if [[ "$file" != *".conf" ]];then
		source $file
	fi
done
