# ZSH Settings

export PATH=$PATH:/usr/local/git/bin:/usr/local/bin
export PATH=~/.local/bin:$PATH

# Auto-update dotfiles (max once per week)
DOTFILES_UPDATE_INTERVAL=$((7 * 24 * 60 * 60)) # 7 days in seconds
DOTFILES_TIMESTAMP="$HOME/.dotfiles_last_pull"

if [[ ! -f "$DOTFILES_TIMESTAMP" ]]; then
  echo "üì¶ Pulling dotfiles (first run)..."
  (cd "$HOME/dotfiles" && git pull && date +%s > "$DOTFILES_TIMESTAMP")
elif [[ $(($(date +%s) - $(cat "$DOTFILES_TIMESTAMP"))) -gt $DOTFILES_UPDATE_INTERVAL ]]; then
  DAYS_AGO=$(( ($(date +%s) - $(cat "$DOTFILES_TIMESTAMP")) / 86400 ))
  echo "üì¶ Pulling dotfiles (last updated $DAYS_AGO days ago)..."
  (cd "$HOME/dotfiles" && git pull && date +%s > "$DOTFILES_TIMESTAMP")
else
  HOURS_AGO=$(( ($(date +%s) - $(cat "$DOTFILES_TIMESTAMP")) / 3600 ))
  echo "‚è≠Ô∏è  Skipping dotfiles pull (last updated $HOURS_AGO hours ago)"
fi

for alias_cp in $HOME/workplace/azuleeDevScripts/src/AzuleeDevScripts/zsh/amazon_aliases.zsh;do
	[ -f "$alias_cp" ] && cp $alias_cp $HOME/dotfiles/zsh/
done

folder="$HOME/dotfiles/zsh"
for file in $folder/*;do
	if [[ "$file" != *".conf" ]];then
		source $file
	fi
done
